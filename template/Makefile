OUTBIN ?= exploitme<number>
EME_CHALLENGE_FLAG := $(or $(EME_CHALLENGE_FLAG),EME{...})

CFLAGS = -Wall \
	-Werror \
	-std=c11 \
	-O2 \
	-D 'EME_CHALLENGE_FLAG="$(EME_CHALLENGE_FLAG)"'

SRCLIST = $(wildcard \
	src/*.c \
)

.PHONY: all static

all:
	$(CC) $(CFLAGS) $(SRCLIST) -o $(OUTBIN)

static: CFLAGS += --static
static: all
