#include <stdarg.h>
#include <stdio.h>
#include <threads.h>
#include "server.h"

#define PRINT_BUFFER_SIZE 1024

ssize_t client_printf(connection_t *client, const char *format, ...)
{
  int send_size;
  va_list ap;
  thread_local static char buffer[PRINT_BUFFER_SIZE];

  va_start(ap, format);
  send_size = vsnprintf(buffer, PRINT_BUFFER_SIZE - 1, format, ap);
  va_end(ap);

  return client_send(client, send_size, buffer);
}
