#ifndef _SERVER_H
#define _SERVER_H

#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <unistd.h>

typedef struct connection
{
  int socket;
  struct sockaddr_in address;
} connection_t;

typedef struct callback_argument
{
  void (*_callback)(struct callback_argument *);
  connection_t *client;
  connection_t *server;
} callback_argument_t;

typedef void (*server_callback_t)(callback_argument_t *);

ssize_t client_read(connection_t *client, int max_size, void *buffer);
ssize_t client_send(connection_t *client, int size, void *buffer);

int server_accept(connection_t *server, server_callback_t callback);
int server_create(connection_t *server, in_port_t port);

#endif /* _SERVER_H */
