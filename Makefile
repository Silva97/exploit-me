DOCKER_IMAGE_OWNER = silva97

.PHONY: all

all:
	@echo "Please, specify the crackme number!"
	@echo "For instance, run 'make 001' to compile the 'crackme001'."

%: crackme%
	$(MAKE) -C "$<"

docker-%: crackme%
	docker build \
		-t "$(DOCKER_IMAGE_OWNER)/$<:latest" \
		--build-arg "CRACKME_NAME=$<" \
		.

run-%: crackme%
	docker run --rm -d --name "$<" "$(DOCKER_IMAGE_OWNER)/$<"
	@echo
	@docker inspect -f 'IP address: {{ .NetworkSettings.IPAddress }}' "$<"

crackme%:
	@echo "The $@ doesn't exists!"
	@exit 1
