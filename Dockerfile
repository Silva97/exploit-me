FROM gcc:12.1.0 AS builder
ARG EXPLOITME_NAME

WORKDIR /app/${EXPLOITME_NAME}

COPY common /app/common
COPY ${EXPLOITME_NAME} /app/${EXPLOITME_NAME}
RUN OUTBIN=/app/the-exploitme make static


FROM alpine:3.16.0
EXPOSE 1337
WORKDIR /app

COPY --from=builder /app/the-exploitme ./the-exploitme

CMD ["./the-exploitme"]
